<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
	<head th:replace="fragments/head :: title(#{nav.edit-user})"></head>
	<body>
		<div th:replace="fragments/navbar :: default('admin')"></div>
	
		<br/>
		
		<div class="container">
			<form method="POST" th:action="@{/user/update}" th:object="${userDTO}">
			     <input type="hidden" th:field="*{id}" />
			     <div class="row">
					  <div class="col-3">
					    <div class="list-group" id="list-tab" role="tablist">
					       <a class="list-group-item light-gray" th:text="#{nav.edit-user}"></a>
					      <a class="list-group-item list-group-item-action active" data-toggle="list" href="#list-general" role="tab" th:text="#{nav.general}"></a>
					      <a class="list-group-item list-group-item-action" data-toggle="list" href="#list-security" role="tab" th:text="#{nav.security}"></a>
					     </div>
					  </div>
					  <div class="col-9">
					    <div class="tab-content mt-0" id="nav-tabContent">
					       <div class="tab-pane fade show active" id="list-general" role="tabpanel" >
					        <h5 th:text="#{nav.general}"></h5>
                            <hr/>
                            <div class="form-group">
	                            <label for="firstname" th:text="#{user.firstname}"></label> 
	                            <input type="text" class="form-control" th:field="*{firstname}" th:validation="firstname" /> 
	                            <span class="text-danger" th:if="${#fields.hasErrors('firstname')}" th:errors="*{firstname}"></span>
	                        </div>
	                        <div class="form-group">
	                            <label for="lastname" th:text="#{user.lastname}"></label> 
	                            <input type="text" class="form-control" th:field="*{lastname}" th:validation="lastname" /> 
	                            <span class="text-danger" th:if="${#fields.hasErrors('lastname')}" th:errors="*{lastname}"></span>
	                        </div>
					        <div class="form-group">
		                        <label for="roleId" th:text="#{nav.role}"></label>
		                        <select class="form-control" th:field="*{roleId}">
		                             <option th:each="role : ${roleDTOs}" 
		                                th:value="${role.id}"
		                                th:text="${role.name}" 
		                            />
		                        </select>
		                        <small class="form-text text-muted" th:text="#{help.user.role}"></small>
		                        <span class="text-danger" th:if="${#fields.hasErrors('roleId')}" th:errors="*{roleId}"></span>
		                    </div>
		                    <div class="form-group">
	                            <label for="maxExecutions" th:text="#{user.max-executions}"></label>
	                            <input type="number" class="form-control" th:field="*{maxExecutions}" th:validation="maxExecutions" /> 
	                            <small class="form-text text-muted" th:text="#{help.user.max-executions}"></small>
	                            <span class="text-danger" th:if="${#fields.hasErrors('maxExecutions')}" th:errors="*{maxExecutions}"></span>
	                        </div>
					      
					      
					      </div>
					      <div class="tab-pane fade" id="list-security" role="tabpanel">
					       <h5 th:text="#{nav.security}"></h5>
                           <hr/>
					        <div class="form-check mb-3">
                                <input type="checkbox" class="form-check-input" th:field="*{enabled}"/>
                                <label class="form-check-label" th:for="${#ids.prev('enabled')}" th:text="#{user.enabled}"></label>
                                <small class="form-text text-muted" th:text="#{help.user.enabled}"></small>
                            </div>
                            <div class="form-check mb-3">
                                <input type="checkbox" class="form-check-input" th:field="*{accountNonExpired}"/>
                                <label class="form-check-label" th:for="${#ids.prev('accountNonExpired')}" th:text="#{user.account-non-expired}"></label>
                                <small class="form-text text-muted" th:text="#{help.user.account-non-expired}"></small>
                            </div>
                            <div class="form-check mb-3">
                                <input type="checkbox" class="form-check-input" th:field="*{accountNonLocked}"/>
                                <label class="form-check-label" th:for="${#ids.prev('accountNonLocked')}" th:text="#{user.account-non-locked}"></label>
                                <small class="form-text text-muted" th:text="#{help.user.account-non-locked}"></small>
                            </div>
                            <div class="form-check mb-3">
                                <input type="checkbox" class="form-check-input" th:field="*{credentialsNonExpired}"/>
                                <label class="form-check-label" th:for="${#ids.prev('credentialsNonExpired')}" th:text="#{help.user.credential-is-non-expired}"></label>
                                <small class="form-text text-muted" th:text="#{help.user.credential-is-non-expired}"></small>
                            </div>
					      
					      </div>
					    </div>
					    <hr>
					    <button type="submit" class="btn btn-success" th:text="#{btn.save}"></button>
                        <a th:href="@{/admin}" class="btn btn-light" th:text="#{btn.cancel}"></a>
					    
					  </div>
					</div>
			
			
				
				      
					
				
				
				
			</form>
			<br/>
		</div>
	
		<div th:replace="fragments/footer :: footer"></div>
	</body>
</html>