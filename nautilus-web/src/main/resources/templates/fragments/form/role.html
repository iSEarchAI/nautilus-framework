<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
	<head></head>
	<body>
	
		<form th:fragment="role" method="POST" th:action="@{/roles/save/}" th:object="${role}">
			<input type="hidden" th:field="*{id}" />
			
			<div class="form-group">
				<label for="name">Name</label>
				<input type="text" class="form-control" th:field="*{name}" autofocus />
				<span class="text-danger" th:if="${#fields.hasErrors('name')}" th:errors="*{name}"></span>
			</div>
			
			<div class="form-group">
				<label for="name">Privileges</label>
				<table id="roles-table" class="table table-striped table-hover table-sm table-datatable">
					<thead>
						<tr>
							<th width="50px">#</th>
							<th>Name</th>
							<th>Allow</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="privilege,i : ${privileges}">
							<td th:text="${i.count}"></td>
							<td th:text="${privilege}"></td>
							<td>
								<div class="form-check">
									<input type="checkbox" 
										class="form-check-input"
										name="privileges" 
										th:checked="${role.getPrivileges().contains(privilege)}"
										th:value="${privilege}"
									/>
								</div>
							</td>
						</tr>
					</tbody>
				</table>
				<span class="text-danger" th:if="${#fields.hasErrors('privileges')}" th:errors="*{privileges}"></span>
			</div>
			
			<button type="submit" class="btn btn-primary">Save</button>
			<a th:href="@{/admin/#roles}" class="btn btn-light">Cancel</a>
		</form>
		
	</body>

</html>